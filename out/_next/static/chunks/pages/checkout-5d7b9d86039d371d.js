(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{354:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return a(1815)}])},1815:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var r=a(4051),s=a.n(r),n=a(5893),i=(a(9669),a(8100),a(7294)),c=a(1163),l=a(5675),o=a(7333),d=a(6267),u=a.n(d),x=a(7521),h=a(1394),p=(a(4005),a(3259)),f=a(7050);function m(e){return(0,n.jsxs)("li",{className:"relative",children:[(0,n.jsxs)("label",{htmlFor:e.id,className:"".concat(e.isChecked?"bg-white dark:bg-white/10 text-black/100 dark:text-white shadow-highest dark:shadow-glare":"bg-gray-50 dark:bg-white/0 hover:bg-white dark:hover:bg-white/5 text-black/75 dark:text-white/75 shadow-stroke dark:shadow-highlight"," flex items-center justify-center space-x-3 px-4 py-3 rounded-lg cursor-pointer transition duration-500 ease-in-out"),children:[(0,n.jsx)(l.default,{src:"/images/".concat(e.id,".svg"),width:40,height:28,loader:u()}),(0,n.jsx)("span",{className:"hidden xs:block",children:e.label})]}),(0,n.jsx)("input",{type:"radio",id:e.id,name:"card",value:e.value,readOnly:!0,checked:e.isChecked,className:"absolute top-0 left-0 opacity-0 pointer-events-none"})]})}var b=a(376),v=(a(4199),a(8457),a(9991)),w=a(9831);a(5874);function g(e,t,a,r,s,n,i){try{var c=e[n](i),l=c.value}catch(o){return void a(o)}c.done?t(l):Promise.resolve(l).then(r,s)}function k(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){g(n,r,s,i,c,"next",e)}function c(e){g(n,r,s,i,c,"throw",e)}i(void 0)}))}}function j(e){var t=(0,c.useRouter)(),a=(0,i.useState)(!1),r=(a[0],a[1],(0,i.useState)(!0)),l=r[0],o=r[1],d=(0,i.useState)(!1),u=d[0],x=d[1],h=(0,i.useState)(!1),p=h[0],b=h[1],g=(0,i.useState)(""),j=g[0],N=g[1],S=(0,i.useState)(""),C=S[0],I=S[1],A=(0,i.useState)(""),_=A[0],B=A[1],Z=(0,i.useState)(""),O=Z[0],E=Z[1],V=(0,i.useState)(0),P=(V[0],V[1]),q=(0,i.useState)(!1),M=(q[0],q[1]),T=(0,i.useState)([""]),D=(T[0],T[1]),J=""!=j&&""!=C&&""!=_&&""!=O,R=0,Y={};localStorage.getItem("cart")&&(Y=JSON.parse(localStorage.getItem("cart"))),R=Object.values(Y).reduce((function(e,t){return e+t.coffee.price*t.quantity}),0);var F={};localStorage.getItem("orders")&&(F=JSON.parse(localStorage.getItem("orders")));var X=function(){var e=k(s().mark((function e(a){var r,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in a.preventDefault(),r=[],Y)i=Y[n],r.push({coffee:{id:i.coffee.id},quantity:i.quantity});(0,v.B5)({mutation:w.gI,variables:{orderItems:r}}).then(function(){var e=k(s().mark((function e(a){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.data.order.id,e.next=3,z();case 3:n=e.sent,F[r]=n,localStorage.setItem("orders",JSON.stringify(F)),P(r),localStorage.removeItem("cart"),t.push("/order/".concat(r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){M(!0),D([e])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=k(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="Visa",u&&(t="Mastercard"),p&&(t="AmericanExpress"),e.abrupt("return",(0,v.B5)({mutation:w.Qp,variables:{name:j,cardType:t,cardNumber:C,expiryDate:_,cvc:O,amount:R}}).then((function(e){return e.data.pay})).catch((function(e){M(!0),D([e])})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=k(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N("A. Customer"),I("1234123412341234"),B("122030"),E(p?"1234":"123"),t.preventDefault();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=k(s().mark((function e(t){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"card-visa"==(a=t.target.id)?(o(!0),x(!1),b(!1)):"card-mastercard"==a?(o(!1),x(!0),b(!1)):"card-amex"==a&&(o(!1),x(!1),b(!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,n.jsxs)("form",{className:"flex flex-col w-full p-8 text-left",onSubmit:X,children:[(0,n.jsxs)("div",{className:"space-y-2 pb-8",children:[(0,n.jsx)("h2",{className:"font-semibold text-2xl sm:text-3xl leading-none sm:leading-tight sm:truncate",children:"Make payment"}),(0,n.jsxs)("p",{className:"text-black/75 dark:text-white/75 text-sm sm:text-base",children:["Use any card details or ",(0,n.jsx)("button",{className:"text-blue-500 dark:text-blue-400 underline hover:bg-blue-50 dark:hover:bg-blue-500/25 pt-0.5 pb-1 px-1 -mx-1 -my-1 rounded-lg transition",onClick:Q,children:"autofill"}),". No payment will be taken."]})]}),(0,n.jsx)("fieldset",{className:"mb-4",children:(0,n.jsxs)("ul",{className:"flex space-x-4",onChange:U,children:[(0,n.jsx)(m,{id:"card-visa",label:"Visa",value:"visa",isChecked:l}),(0,n.jsx)(m,{id:"card-mastercard",label:"Mastercard",value:"mastercard",isChecked:u}),(0,n.jsx)(m,{id:"card-amex",label:"Amex",value:"amex",isChecked:p})]})}),(0,n.jsx)("fieldset",{className:"flex",children:(0,n.jsx)(f.Z,{value:j,setter:N,id:"cardholder",type:"text",label:"Cardholder Name*",placeholder:"Enter name"})}),(0,n.jsx)("fieldset",{className:"flex",children:(0,n.jsx)(f.Z,{value:C,setter:I,id:"number",type:"cardnumber",label:"Card Number*",placeholder:"Enter card number"})}),(0,n.jsxs)("fieldset",{className:"grid grid-cols-2 gap-6",children:[(0,n.jsx)(f.Z,{value:_,setter:B,id:"expiry",type:"cardexpiry",label:"Expiry Date*",placeholder:"MM/YYYY"}),(0,n.jsx)(f.Z,{value:O,setter:E,id:"cvc",type:"cardcvc",label:"CVC*",placeholder:"***"})]}),(0,n.jsx)(y,{disabled:!J})]})}function y(e){return(0,n.jsxs)("button",{className:"".concat(e.disabled?"bg-gray-200 dark:bg-white/5 text-black/25 dark:text-white/25":"bg-black/90 dark:bg-white/90 hover:bg-black dark:hover:bg-white text-white dark:text-black/75 shadow-subtle"," relative flex items-center justify-between w-full h-[72px] px-8 mt-12 text-left text-white rounded-lg  group transition duration-500 ease-in-out overflow-hidden translate-x-0"),disabled:e.disabled,children:[(0,n.jsx)("span",{className:"".concat(e.disabled?"opacity-0":"opacity-100"," absolute left-0 top-0 bottom-0 w-1/2 bg-gradient-to-r from-white/0 via-white/20 dark:via-white/75 to-white/0 shimmer transition ease-in-out")}),(0,n.jsx)("span",{className:"uppercase tracking-widest text-lg",children:"Pay now"}),(0,n.jsx)("span",{className:"".concat(e.disabled?"opacity-0":"opacity-75 group-hover:opacity-100"," flex items-center invert dark:invert-0 group-hover:translate-x-[8px] transition duration-500 ease-in-out"),children:(0,n.jsx)(l.default,{src:b.Z,loader:u()})})]})}var N=a(5969);function S(e,t,a,r,s,n,i){try{var c=e[n](i),l=c.value}catch(o){return void a(o)}c.done?t(l):Promise.resolve(l).then(r,s)}function C(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){S(n,r,s,i,c,"next",e)}function c(e){S(n,r,s,i,c,"throw",e)}i(void 0)}))}}function I(e){var t=(0,c.useRouter)(),a=(0,i.useState)(""),r=(a[0],a[1]),d="";e.isAuthed&&(d=localStorage.getItem("username"));var f=0,m={};localStorage.getItem("cart")&&(m=JSON.parse(localStorage.getItem("cart"))),f=Object.values(m).reduce((function(e,t){return e+t.coffee.price*t.quantity}),0);var v=function(){var e=C(s().mark((function e(a){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.back();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var t=C(s().mark((function t(a){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setAccountVisible(!0);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=C(s().mark((function t(a){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setIsAuthed(!1);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,n.jsx)(x.Z,{accountVisible:e.accountVisible,setAccountVisible:e.setAccountVisible,isAuthed:e.isAuthed,setIsAuthed:e.setIsAuthed}),(0,n.jsxs)("main",{className:"relative flex flex-col items-center justify-center w-full flex-1 space-y-12 py-12 px-8 text-center dark:text-white/90 z-30",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between max-w-[1080px] w-full xs:px-8 space-x-4",children:[(0,n.jsxs)("div",{className:"flex flex-col text-left space-y-2",children:[(0,n.jsx)("h1",{className:"font-semibold text-4xl sm:text-5xl leading-none sm:leading-tight sm:truncate",children:"Checkout"}),(0,n.jsxs)("p",{className:"text-black/75 dark:text-white/75 text-sm sm:text-base",children:["Review and pay for your order ",(0,n.jsx)("span",{className:"opacity-50",children:"(except not really)"})]})]}),(0,n.jsx)("button",{className:"flex items-center justify-center px-4 h-10 border border-gray-500/25 dark:border-white/20 rounded-lg uppercase tracking-widest text-sm text-black/75 dark:text-white/75 hover:text-black/100 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/10 transition",onClick:v,children:(0,n.jsx)("span",{children:"Cancel"})})]}),(0,n.jsxs)("section",{className:"relative max-w-[1080px] w-full bg-white dark:bg-[#0B0B0B] rounded-xl shadow-high dark:shadow-highlight pt-2 overflow-hidden",children:[(0,n.jsx)(p.Z,{cartVisible:!0,isInline:!0,onRemoveItem:function(){f=Object.values(m).reduce((function(e,t){return e+t.coffee.price*t.quantity}),0),r(f)}}),m&&(0,n.jsxs)("div",{className:"flex flex-col items-start bg-gray-50 dark:bg-black/25 border-t border-gray-100 dark:border-white/10 mt-2 px-8 py-4",children:[(0,n.jsx)("p",{className:"text-black/75 dark:text-white/75 text-sm sm:text-base",children:"Total to pay"}),(0,n.jsx)("p",{className:"text-black/75 dark:text-white/75 font-semibold text-2xl sm:text-4xl",children:(0,n.jsx)(o.Z,{displayType:"text",prefix:"$",value:(f/100).toFixed(2)})})]})]}),(0,n.jsx)("section",{className:"relative max-w-[1080px] w-full bg-white dark:bg-[#0B0B0B] rounded-xl shadow-high dark:shadow-highlight p-8",children:e.isAuthed?(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("p",{className:"flex flex-col xs:flex-row xs:items-center text-black/75 dark:text-white/75 text-sm sm:text-base",children:[(0,n.jsx)("span",{className:"mr-2",children:"Signed in as"}),(0,n.jsxs)("span",{className:"inline-flex",children:[(0,n.jsx)("span",{className:"flex items-center mr-1 opacity-75",children:(0,n.jsx)(l.default,{src:N.Z,className:"dark:invert",loader:u()})}),(0,n.jsx)("b",{children:d})]})]}),(0,n.jsx)("button",{onClick:g,className:"relative whitespace-nowrap text-black/50 dark:text-white/50 hover:text-red-600 dark:hover:text-red-500 hover:bg-red-600/10 rounded-md px-2 py-1 -mx-2 -mx-1 uppercase text-[11px] tracking-widest text-center transition",children:"Sign out"})]}):(0,n.jsxs)("button",{onClick:w,className:"bg-black/90 dark:bg-white/90 hover:bg-black dark:hover:bg-white text-white dark:text-black/75 shadow-subtle relative flex items-center justify-between w-full h-[72px] px-8 text-left text-white rounded-lg group transition duration-500 ease-in-out overflow-hidden translate-x-0",children:[(0,n.jsx)("span",{className:"absolute left-0 top-0 bottom-0 w-1/2 bg-gradient-to-r from-white/0 via-white/20 dark:via-white/75 to-white/0 shimmer transition ease-in-out"}),(0,n.jsx)("span",{className:"uppercase tracking-widest leading-tight text-lg",children:"Sign in to checkout"}),(0,n.jsx)("span",{className:"flex items-center invert dark:invert-0 group-hover:translate-x-[8px] transition duration-500 ease-in-out",children:(0,n.jsx)(l.default,{src:b.Z,loader:u()})})]})}),e.isAuthed&&(0,n.jsx)("section",{className:"relative max-w-[1080px] w-full bg-white dark:bg-[#0B0B0B] rounded-xl shadow-high dark:shadow-highlight",children:(0,n.jsx)(j,{})})]}),(0,n.jsx)(h.Z,{})]})}}},function(e){e.O(0,[24,452,956,380,10,774,888,179],(function(){return t=354,e(e.s=t);var t}));var t=e.O();_N_E=t}]);